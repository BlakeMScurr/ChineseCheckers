!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Tester=class{test(){return"yeah, I'm working"}};t.game=class{constructor(e,t,o,r,n){this.startingPosition=o=>{!function(e){for(var t=0;t<e.length-1;t++)for(var o=t+1;o<e.length;o++){var r=e[t],n=e[o];if(r.name==n.name)throw"two players have name "+r.name;if(r.colour==n.colour)throw"two players have colour "+r.colour}}(o);var r=e.board();return t(r,o),r},this.validateMove=o,this.applyMove=r,this.winCondition=n}};t.player=class{constructor(e,t){this.name=e,this.colour=t}};t.graph=class{constructor(e){this.edges=new Map,e.forEach((e,t)=>{var o,r;null==this.edges.get(t.x)&&this.edges.set(t.x,new Map),null==(null===(o=this.edges.get(t.x))||void 0===o?void 0:o.get(t.y))&&(null===(r=this.edges.get(t.x))||void 0===r||r.set(t.y,new Map)),e.forEach((e,o)=>{var r,n,i,s,a,l,c;null==(null===(n=null===(r=this.edges.get(t.x))||void 0===r?void 0:r.get(t.y))||void 0===n?void 0:n.get(o.x))&&(null===(s=null===(i=this.edges.get(t.x))||void 0===i?void 0:i.get(t.y))||void 0===s||s.set(o.x,new Map)),null===(c=null===(l=null===(a=this.edges.get(t.x))||void 0===a?void 0:a.get(t.y))||void 0===l?void 0:l.get(o.x))||void 0===c||c.set(o.y,e)})})}traverse(e,t){return t.forEach(t=>{var o=this.hop(e,t);null!=o&&(e=o)}),e}hop(e,t){var o,r=null===(o=this.edges.get(e.x))||void 0===o?void 0:o.get(e.y);if(null!=r)for(const[e,o]of r.entries())for(const[r,n]of o.entries())if(n.dir==t)return new i(e,r)}board(){var e=new Map;for(const[o,r]of this.edges)for(const[n,s]of r)e.set(new i(o,n),t.emptyTile);return new r(e)}};t.direction=class{constructor(e){this.dir=e}};t.match=class{constructor(e,t,o){this.gameType=e,this.topology=t,this.players=o,this.moves=[],this.currentPlayer=0,this.boardState=e.startingPosition(o)}move(e){if(this.gameType.validateMove(this.currentPlayer,this.boardState,this.topology,e)){this.gameType.applyMove(this.currentPlayer,this.boardState,this.topology,e),this.currentPlayer=(this.currentPlayer+1)%this.players.length;var t=this.gameType.winCondition(this.players,this.currentPlayer,this.boardState);return-1!=t?this.players[t]:void 0}console.log("invalid move")}winner(){return this.gameType.winCondition(this.players,this.currentPlayer,this.boardState)}};class r{constructor(e){this.state=[],e.forEach((e,t)=>{null==this.state[t.x]&&this.set(e,t),this.state[t.x][t.y]=e})}forEach(e){this.state.forEach(t=>{t.forEach(t=>{e(t)})})}set(e,t){null==this.state[t.x]&&(this.state[t.x]=[]),this.state[t.x][t.y]=e}get(e){var o=this.state[e.x][e.y];return null==o?t.emptyTile:o}}t.board=r;class n{constructor(e,t){this.owner=e,this.type=t}}t.tile=n,t.emptyTile=new n(-1,"empty");t.move=class{constructor(e){this.coordinates=e}string(){return this.coordinates.map(e=>"("+e.x+","+e.y+")").join(", ")}};class i{constructor(e,t){this.x=e,this.y=t}equals(e){return JSON.stringify(this)==JSON.stringify(e)}}t.coordinate=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(2),n=o(0);var i=["white","violet"],s=["yellow","purple"];function a(e){var t=document.querySelector("#title");console.log("working?"),t.innerHTML=-1==e.winner()?u[e.currentPlayer].name+"'s turn":u[e.winner()].name+" is the winner!!!"}function l(e){var t=Array.from(e.classList),o=-1,r=-1;if(t.forEach(e=>{e.match(/row*/)&&(o=+e.replace("row","")),e.match(/column*/)&&(r=+e.replace("column",""))}),-1==o||-1==r)throw"no row found: row: "+o+", column: "+r;return new n.coordinate(r,o)}function c(e,t){var o=document.getElementsByClassName("tile");for(let c of Array.from(o)){var r=c.childNodes[0],n=l(c);(n.x+n.y)%2==0?(c.style.backgroundColor="black",r.style.backgroundColor="black"):(c.style.backgroundColor="red",r.style.backgroundColor="red");var a=e.boardState.get(n);-1!=a.owner&&"empty"!=a.type&&(r.style.backgroundColor=i[a.owner],"queen"==a.type&&(r.style.backgroundColor=s[a.owner])),t.coordinates.forEach(e=>{n.x==e.x&&n.y==e.y&&(n.x+n.y)%2==0&&(c.style.backgroundColor="444",-1==a.owner&&(r.style.backgroundColor="444"))})}}var u=[new n.player("Blake",i[0]),new n.player("Anja",i[1])],d=r.newCheckersMatch(u),h=new class{constructor(){this.coordinates=[]}add(e){if((e.x+e.y)%2==0)if(0!=this.coordinates.length){var t=this.coordinates[this.coordinates.length-1];t.x==e.x&&t.y==e.y?this.coordinates.pop():this.coordinates.push(e)}else this.coordinates.push(e)}clear(){this.coordinates=[]}move(){return new n.move(this.coordinates)}};a(d),c(d,h);var v=document.getElementsByClassName("tile");for(let e of Array.from(v)){const t=l(e);e.onclick=(e=>()=>{h.add(e),c(d,h)})(t)}function y(){d.move(h.move()),h.clear(),c(d,h),a(d)}document.getElementById("move").onclick=()=>{y()},document.addEventListener("keydown",e=>{"Enter"==e.key&&y()})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(0),n=o(3),i=new r.tile(0,"pawn"),s=new r.tile(1,"pawn"),a=new r.tile(0,"queen"),l=new r.tile(1,"queen");class c{topology(){return n.rightGrid(8,8)}initialiseState(e,t){for(var o=0;o<4;o++)e.set(i,new r.coordinate(2*o,0)),e.set(i,new r.coordinate(2*o+1,1)),e.set(i,new r.coordinate(2*o,2)),e.set(s,new r.coordinate(2*o+1,5)),e.set(s,new r.coordinate(2*o,6)),e.set(s,new r.coordinate(2*o+1,7));console.log(e)}validateMove(e,t,o,n){if(n.coordinates.length<2)throw"a move in checkers consists of at least two coordinates, the position of the piece to move, the position it moves to, and any positions it moves via";var i,s=t.get(n.coordinates[0]);if(e!=s.owner)return console.log("invalid move: first coordinate in a move should be the current player.\nCurrent player: "+e+", player owning selected piece: "+s.owner+"\nFor move "+n.string()+"\nSelected piece: "+JSON.stringify(s)),!1;(i=n,i.coordinates.slice(1,i.coordinates.length)).forEach(e=>{if(t.get(e)!=r.emptyTile)return console.log("invalid move: pieces must hop to and via empty tiles\nNon-empty tile: "+JSON.stringify(t.get(e))+" at "+JSON.stringify(e)),!1});var a=u(s);if(2==n.coordinates.length){var l=n.coordinates[0],c=n.coordinates[1],h=!1;if(a.forEach(e=>{o.traverse(l,[e,"left"]).equals(c)&&(h=!0),o.traverse(l,[e,"right"]).equals(c)&&(h=!0)}),h)return!0}var v=d(n,o,a);if(null==v)return console.log("invalid move: hops must be two steps in a valid direction"),!1;for(var y=0;y<v.length;y++){var f=t.get(v[y]).owner;if(f==e||-1==f)return!1}return!0}applyMove(e,t,o,n){var i=n.coordinates,s=i[i.length-1];t.set(t.get(i[0]),s),t.set(r.emptyTile,i[0]);var c=d(n,o,u(t.get(s)));null==c||c.forEach(e=>{t.set(r.emptyTile,e)}),7==s.y&&0==e&&t.set(a,s),0==s.y&&1==e&&t.set(l,s)}winCondition(e,t,o){var r=!1,n=!1;return o.forEach(e=>{0==e.owner&&(r=!0),1==e.owner&&(n=!0)}),r?n?-1:0:1}}function u(e){return"queen"==e.type?["up","down"]:0==e.owner?["up"]:["down"]}function d(e,t,o){var r=!0,n=[];if(function(e,t){for(var o=1;o<e.length;o++){var r=e[o-1],n=e[o];t(r,n)}}(e.coordinates,(e,i)=>{var s=!1;o.forEach(o=>{if(t.traverse(e,[o,o,"left","left"]).equals(i)){s=!0;var r=t.traverse(e,[o,"left"]);n.push(r)}t.traverse(e,[o,o,"right","right"]).equals(i)&&(s=!0,null==(r=t.traverse(e,[o,"right"]))&&console.log("alas! the refined and noble french!"),console.log("based pushing "+JSON.stringify(r)),n.push(r),console.log(JSON.stringify(n[0])))}),s||(r=!1)}),n.length>=1&&console.log(JSON.stringify(n[0])),r)return n}t.newCheckersMatch=function(e){var t=new c,o=t.topology();return new r.match(new r.game(o,t.initialiseState,t.validateMove,t.applyMove,t.winCondition),o,e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(0);t.rightGrid=function(e,t){for(var o=new Map,n=Array(),i=0;i<e;i++)for(var s=0;s<t;s++)n.push(new r.coordinate(i,s));var a=new r.direction("down"),l=new r.direction("up"),c=new r.direction("left"),u=new r.direction("right");return n.forEach(e=>{o.set(e,new Map),n.forEach(t=>{var r,n,i,s;e.x==t.x&&(e.y==t.y+1?null===(r=o.get(e))||void 0===r||r.set(t,a):e.y==t.y-1&&(null===(n=o.get(e))||void 0===n||n.set(t,l))),e.y==t.y&&(e.x==t.x+1?null===(i=o.get(e))||void 0===i||i.set(t,c):e.x==t.x-1&&(null===(s=o.get(e))||void 0===s||s.set(t,u)))})}),new r.graph(o)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvZ2FtZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWVzL2NoZWNrZXJzL2NoZWNrZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9ib2FyZHMvYm9hcmRzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidG9wb2xvZ3kiLCJpbml0aWFsaXNlU3RhdGUiLCJ2YWxpZGF0ZU1vdmUiLCJhcHBseU1vdmUiLCJ3aW5Db25kaXRpb24iLCJ0aGlzIiwic3RhcnRpbmdQb3NpdGlvbiIsInBsYXllcnMiLCJsZW5ndGgiLCJqIiwicSIsImNvbG91ciIsImNvbnNpc3RlbnRQbGF5ZXJzIiwiYiIsImJvYXJkIiwiZWRnZXMiLCJNYXAiLCJmb3JFYWNoIiwibTEiLCJjMSIsInVuZGVmaW5lZCIsIngiLCJzZXQiLCJ5IiwiYzIiLCJkaXJlY2l0b25zIiwiZGlyIiwibmV4dEhvcCIsImhvcCIsImRpcmVjdGlvbiIsImFkamFjZW50cyIsInltYXAiLCJlbnRyaWVzIiwiY29vcmRpbmF0ZSIsIl8iLCJlbXB0eVRpbGUiLCJnYW1lVHlwZSIsIm1vdmVzIiwiY3VycmVudFBsYXllciIsImJvYXJkU3RhdGUiLCJuZXh0TW92ZSIsIndpbm5pbmdQbGF5ZXIiLCJjb25zb2xlIiwibG9nIiwic3RhdGUiLCJjYWxsYmFjayIsInRpbGVzIiwidGlsZSIsIm93bmVyIiwidHlwZSIsImNvb3JkaW5hdGVzIiwibWFwIiwiam9pbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJwbGF5ZXJDb2xvdXIiLCJwbGF5ZXJIaWdoTGlnaHQiLCJzZXRUaXRsZSIsInRpdGxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwid2lubmVyIiwiY29vcmRpbmF0ZUZyb21FbGVtZW50IiwiY2xhc3NlcyIsIkFycmF5IiwiZnJvbSIsImNsYXNzTGlzdCIsInJvdyIsImNvbHVtbiIsImNsYXNzTmFtZSIsIm1hdGNoIiwicmVwbGFjZSIsInJlbmRlckJvYXJkIiwibWgiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicGllY2UiLCJjaGlsZE5vZGVzIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnYW1lVGlsZSIsIm1vdmVDIiwicGxheWVyIiwibWF0Y2hJbnN0YW5jZSIsIm5ld0NoZWNrZXJzTWF0Y2giLCJsYXN0IiwicG9wIiwicHVzaCIsIm1vdmUiLCJvbmNsaWNrIiwiYWRkIiwibWFrZUNsaWNrZXIiLCJtYWtlTW92ZSIsImNsZWFyIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJwYXduMCIsInBhd24xIiwicXVlZW4wIiwicXVlZW4xIiwiQ2hlY2tlcnMiLCJyaWdodEdyaWQiLCJlbXB0eVN0YXRlIiwic3RyaW5nIiwic2xpY2UiLCJkaXJzIiwiZGlyZWN0aW9ucyIsInN0YXJ0IiwiZW5kIiwiaG9wVmFsaWQiLCJ0cmF2ZXJzZSIsImVxdWFscyIsImgiLCJob3BwZWQiLCJjcyIsImRlc3QiLCJwMEFsaXZlIiwicDFBbGl2ZSIsIm1vdmVWYWxpZCIsImhvcHMiLCJmcm9nIiwiZyIsImdhbWUiLCJhbGxUaWxlcyIsImRvd24iLCJ1cCIsImxlZnQiLCJyaWdodCIsInRpbGUxIiwidGlsZTIiLCJncmFwaCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxFQUFQRSxHQUE0QixpQkFBVEYsRUFBbUIsSUFBSSxJQUFJTSxLQUFPTixFQUFPckIsRUFBb0JVLEVBQUVlLEVBQUlFLEVBQUssU0FBU0EsR0FBTyxPQUFPTixFQUFNTSxJQUFRQyxLQUFLLEtBQU1ELElBQzlJLE9BQU9GLEdBSVJ6QixFQUFvQjZCLEVBQUksU0FBUzFCLEdBQ2hDLElBQUlTLEVBQVNULEdBQVVBLEVBQU9xQixXQUM3QixXQUF3QixPQUFPckIsRUFBZ0IsU0FDL0MsV0FBOEIsT0FBT0EsR0FFdEMsT0FEQUgsRUFBb0JVLEVBQUVFLEVBQVEsSUFBS0EsR0FDNUJBLEdBSVJaLEVBQW9CYSxFQUFJLFNBQVNpQixFQUFRQyxHQUFZLE9BQU9qQixPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1QixFQUFRQyxJQUd6Ry9CLEVBQW9Ca0MsRUFBSSxHQUlqQmxDLEVBQW9CQSxFQUFvQm1DLEVBQUksRyxnRkNoRnJELGVBQ0ksT0FDSSxNQUFPLHNCQUlmLGFBTUksWUFDUUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsR0FFSkMsS0FBS0MsaUJBQW9CQyxLQXlOakMsU0FBMkJBLEdBQ3ZCLElBQUssSUFBSXZDLEVBQUksRUFBR0EsRUFBSXVDLEVBQVFDLE9BQVMsRUFBR3hDLElBQ3BDLElBQUssSUFBSXlDLEVBQUl6QyxFQUFFLEVBQUd5QyxFQUFJRixFQUFRQyxPQUFRQyxJQUFLLENBQ3ZDLElBQUlYLEVBQUlTLEVBQVF2QyxHQUNaMEMsRUFBSUgsRUFBUUUsR0FDaEIsR0FBSVgsRUFBRXZCLE1BQVFtQyxFQUFFbkMsS0FDWixLQUFNLHlCQUEyQnVCLEVBQUV2QixLQUV2QyxHQUFJdUIsRUFBRWEsUUFBVUQsRUFBRUMsT0FDZCxLQUFNLDJCQUE2QmIsRUFBRWEsUUFqT3pDQyxDQUFrQkwsR0FDbEIsSUFBSU0sRUFBSWIsRUFBU2MsUUFFakIsT0FEQWIsRUFBZ0JZLEVBQUdOLEdBQ1pNLEdBRVhSLEtBQUtILGFBQWVBLEVBQ3BCRyxLQUFLRixVQUFZQSxFQUNqQkUsS0FBS0QsYUFBZUEsSUFJNUIsZUFJSSxZQUFZN0IsRUFBY29DLEdBQ3RCTixLQUFLOUIsS0FBT0EsRUFDWjhCLEtBQUtNLE9BQVNBLElBTXRCLGNBT0ksWUFBWUksR0FDUlYsS0FBS1UsTUFBUSxJQUFJQyxJQUNqQkQsRUFBTUUsUUFBUSxDQUFDQyxFQUFnQ0MsSyxRQUNmQyxNQUF4QmYsS0FBS1UsTUFBTWxDLElBQUlzQyxFQUFHRSxJQUNsQmhCLEtBQUtVLE1BQU1PLElBQUlILEVBQUdFLEVBQUcsSUFBSUwsS0FHVUksT0FBZixRQUFwQixFQUFBZixLQUFLVSxNQUFNbEMsSUFBSXNDLEVBQUdFLFVBQUUsZUFBRXhDLElBQUlzQyxFQUFHSSxNQUNULFFBQXBCLEVBQUFsQixLQUFLVSxNQUFNbEMsSUFBSXNDLEVBQUdFLFVBQUUsU0FBRUMsSUFBSUgsRUFBR0ksRUFBRyxJQUFJUCxNQUd4Q0UsRUFBR0QsUUFBUSxDQUFDM0MsRUFBY2tELEssa0JBQzRCSixPQUFoQixRQUE5QixFQUFvQixRQUFwQixFQUFBZixLQUFLVSxNQUFNbEMsSUFBSXNDLEVBQUdFLFVBQUUsZUFBRXhDLElBQUlzQyxFQUFHSSxVQUFDLGVBQUcxQyxJQUFJMkMsRUFBR0gsTUFDVixRQUE5QixFQUFvQixRQUFwQixFQUFBaEIsS0FBS1UsTUFBTWxDLElBQUlzQyxFQUFHRSxVQUFFLGVBQUV4QyxJQUFJc0MsRUFBR0ksVUFBQyxTQUFHRCxJQUFJRSxFQUFHSCxFQUFHLElBQUlMLE1BR1YsUUFBekMsRUFBOEIsUUFBOUIsRUFBb0IsUUFBcEIsRUFBQVgsS0FBS1UsTUFBTWxDLElBQUlzQyxFQUFHRSxVQUFFLGVBQUV4QyxJQUFJc0MsRUFBR0ksVUFBQyxlQUFHMUMsSUFBSTJDLEVBQUdILFVBQUMsU0FBR0MsSUFBSUUsRUFBR0QsRUFBR2pELE9BS2xFLFNBQVNELEVBQWVvRCxHQVFwQixPQVBBQSxFQUFXUixRQUFTUyxJQUNoQixJQUFJQyxFQUFVdEIsS0FBS3VCLElBQUl2RCxFQUFHcUQsR0FDWE4sTUFBWE8sSUFHSnRELEVBQUlzRCxLQUVEdEQsRUFHWCxJQUFJQSxFQUFld0QsRyxNQUNYQyxFQUErQixRQUF0QixFQUFHekIsS0FBS1UsTUFBTWxDLElBQUlSLEVBQUVnRCxVQUFFLGVBQUV4QyxJQUFJUixFQUFFa0QsR0FDM0MsR0FBaUJILE1BQWJVLEVBR0osSUFBSyxNQUFPVCxFQUFHVSxLQUFTRCxFQUFVRSxVQUM5QixJQUFLLE1BQU9ULEVBQUdHLEtBQVFLLEVBQUtDLFVBQ3hCLEdBQUlOLEVBQUlBLEtBQU9HLEVBQ1gsT0FBTyxJQUFJSSxFQUFXWixFQUFHRSxHQU16QyxRQUNJLElBQUlWLEVBQTJCLElBQUlHLElBRW5DLElBQUssTUFBT0ssRUFBR1UsS0FBUzFCLEtBQUtVLE1BQ3pCLElBQUssTUFBT1EsRUFBR1csS0FBTUgsRUFDakJsQixFQUFFUyxJQUFJLElBQUlXLEVBQVdaLEVBQUdFLEdBQUksRUFBQVksV0FHcEMsT0FBTyxJQUFJckIsRUFBTUQsS0FJekIsa0JBR0ksWUFBWWEsR0FDUnJCLEtBQUtxQixJQUFNQSxJQUluQixjQVdJLFlBQVlVLEVBQWdCcEMsRUFBaUJPLEdBQ3pDRixLQUFLK0IsU0FBV0EsRUFDaEIvQixLQUFLTCxTQUFXQSxFQUNoQkssS0FBS0UsUUFBVUEsRUFDZkYsS0FBS2dDLE1BQVEsR0FDYmhDLEtBQUtpQyxjQUFnQixFQUNyQmpDLEtBQUtrQyxXQUFhSCxFQUFTOUIsaUJBQWlCQyxHQUdoRCxLQUFLaUMsR0FDRCxHQUFLbkMsS0FBSytCLFNBQVNsQyxhQUFhRyxLQUFLaUMsY0FBZWpDLEtBQUtrQyxXQUFZbEMsS0FBS0wsU0FBVXdDLEdBQXBGLENBS0FuQyxLQUFLK0IsU0FBU2pDLFVBQVVFLEtBQUtpQyxjQUFlakMsS0FBS2tDLFdBQVlsQyxLQUFLTCxTQUFVd0MsR0FDNUVuQyxLQUFLaUMsZUFBaUJqQyxLQUFLaUMsY0FBZ0IsR0FBS2pDLEtBQUtFLFFBQVFDLE9BRTdELElBQUlpQyxFQUFnQnBDLEtBQUsrQixTQUFTaEMsYUFBYUMsS0FBS0UsUUFBU0YsS0FBS2lDLGNBQWVqQyxLQUFLa0MsWUFDdEYsT0FBc0IsR0FBbEJFLEVBQ09wQyxLQUFLRSxRQUFRa0MsUUFEeEIsRUFSSUMsUUFBUUMsSUFBSSxnQkFhcEIsU0FDSSxPQUFPdEMsS0FBSytCLFNBQVNoQyxhQUFhQyxLQUFLRSxRQUFTRixLQUFLaUMsY0FBZWpDLEtBQUtrQyxjQUlqRixNQUFhekIsRUFHVCxZQUFZOEIsR0FDUnZDLEtBQUt1QyxNQUFRLEdBQ2JBLEVBQU0zQixRQUFRLENBQUMvQixFQUFTYixLQUNHK0MsTUFBbkJmLEtBQUt1QyxNQUFNdkUsRUFBRWdELElBQ2JoQixLQUFLaUIsSUFBSXBDLEVBQUdiLEdBRWhCZ0MsS0FBS3VDLE1BQU12RSxFQUFFZ0QsR0FBR2hELEVBQUVrRCxHQUFLckMsSUFJL0IsUUFBUTJELEdBQ0p4QyxLQUFLdUMsTUFBTTNCLFFBQVM2QixJQUNoQkEsRUFBTTdCLFFBQVMvQixJQUNYMkQsRUFBUzNELE9BS3JCLElBQUlBLEVBQVNiLEdBQ2MrQyxNQUFuQmYsS0FBS3VDLE1BQU12RSxFQUFFZ0QsS0FDYmhCLEtBQUt1QyxNQUFNdkUsRUFBRWdELEdBQUssSUFFdEJoQixLQUFLdUMsTUFBTXZFLEVBQUVnRCxHQUFHaEQsRUFBRWtELEdBQUtyQyxFQUczQixJQUFJYixHQUNBLElBQUlhLEVBQUltQixLQUFLdUMsTUFBTXZFLEVBQUVnRCxHQUFHaEQsRUFBRWtELEdBQzFCLE9BQVNILE1BQUxsQyxFQUNPLEVBQUFpRCxVQUVKakQsR0FqQ2YsVUFxQ0EsTUFBYTZELEVBS1QsWUFBWUMsRUFBZUMsR0FDdkI1QyxLQUFLMkMsTUFBUUEsRUFDYjNDLEtBQUs0QyxLQUFPQSxHQVBwQixTQVdhLEVBQUFkLFVBQVksSUFBSVksR0FBTSxFQUFHLFNBRXRDLGFBR0ksWUFBWUcsR0FDUjdDLEtBQUs2QyxZQUFjQSxFQUd2QixTQUNJLE9BQU83QyxLQUFLNkMsWUFBWUMsSUFBSzlFLEdBQXdCLElBQU1BLEVBQUVnRCxFQUFJLElBQU1oRCxFQUFFa0QsRUFBSSxLQUFNNkIsS0FBSyxRQUloRyxNQUFhbkIsRUFJVCxZQUFZWixFQUFXRSxHQUNuQmxCLEtBQUtnQixFQUFJQSxFQUNUaEIsS0FBS2tCLEVBQUlBLEVBR2IsT0FBT2xELEdBQ0gsT0FBT2dGLEtBQUtDLFVBQVVqRCxPQUFTZ0QsS0FBS0MsVUFBVWpGLElBVnRELGdCLDhFQzVOQSxhQUNBLE9BSUEsSUFFSWtGLEVBQWUsQ0FBQyxRQUFTLFVBQ3pCQyxFQUFrQixDQUFDLFNBQVUsVUFHakMsU0FBU0MsRUFBU3JGLEdBQ2QsSUFBSXNGLEVBQTRCQyxTQUFTQyxjQUFjLFVBQ3ZEbEIsUUFBUUMsSUFBSSxZQUNaZSxFQUFNRyxXQUEyQixHQUFmekYsRUFBRTBGLFNBQWdCdkQsRUFBUW5DLEVBQUVrRSxlQUFlL0QsS0FBTyxVQUFXZ0MsRUFBUW5DLEVBQUUwRixVQUFVdkYsS0FBTyxvQkFHOUcsU0FBU3dGLEVBQXNCaEIsR0FDM0IsSUFBSWlCLEVBQVVDLE1BQU1DLEtBQUtuQixFQUFLb0IsV0FDMUJDLEdBQU8sRUFDUEMsR0FBVSxFQVVkLEdBVEFMLEVBQVEvQyxRQUFTcUQsSUFDVEEsRUFBVUMsTUFBTSxVQUNoQkgsR0FBT0UsRUFBVUUsUUFBUSxNQUFPLEtBRWhDRixFQUFVQyxNQUFNLGFBQ2hCRixHQUFVQyxFQUFVRSxRQUFRLFNBQVUsUUFJbEMsR0FBUkosSUFBd0IsR0FBWEMsRUFDYixLQUFNLHNCQUF3QkQsRUFBTSxhQUFlQyxFQUV2RCxPQUFPLElBQUksRUFBQXBDLFdBQVdvQyxFQUFRRCxHQUdsQyxTQUFTSyxFQUFZckcsRUFBVXNHLEdBQzNCLElBQUk1QixFQUEwQ2EsU0FBU2dCLHVCQUF1QixRQUM5RSxJQUFLLElBQUk1QixLQUFRa0IsTUFBTUMsS0FBS3BCLEdBQVEsQ0FDaEMsSUFBSThCLEVBQXdCN0IsRUFBSzhCLFdBQVcsR0FDeEN4RyxFQUFJMEYsRUFBc0JoQixJQUV6QjFFLEVBQUVnRCxFQUFJaEQsRUFBRWtELEdBQUssR0FBSyxHQUNuQndCLEVBQUsrQixNQUFNQyxnQkF0Q0wsUUF1Q05ILEVBQU1FLE1BQU1DLGdCQXZDTixVQXlDTmhDLEVBQUsrQixNQUFNQyxnQkF4Q0wsTUF5Q05ILEVBQU1FLE1BQU1DLGdCQXpDTixPQTRDVixJQUFJQyxFQUFXNUcsRUFBRW1FLFdBQVcxRCxJQUFJUixJQUNULEdBQW5CMkcsRUFBU2hDLE9BQWdDLFNBQWpCZ0MsRUFBUy9CLE9BQ2pDMkIsRUFBTUUsTUFBTUMsZ0JBQWtCeEIsRUFBYXlCLEVBQVNoQyxPQUMvQixTQUFqQmdDLEVBQVMvQixPQUNUMkIsRUFBTUUsTUFBTUMsZ0JBQWtCdkIsRUFBZ0J3QixFQUFTaEMsU0FLL0QwQixFQUFHeEIsWUFBWWpDLFFBQVNnRSxJQUNoQjVHLEVBQUVnRCxHQUFLNEQsRUFBTTVELEdBQUtoRCxFQUFFa0QsR0FBSzBELEVBQU0xRCxJQUFNbEQsRUFBRWdELEVBQUloRCxFQUFFa0QsR0FBSyxHQUFLLElBQ3ZEd0IsRUFBSytCLE1BQU1DLGdCQXBESCxPQXFEZSxHQUFuQkMsRUFBU2hDLFFBQ1Q0QixFQUFNRSxNQUFNQyxnQkF0RFIsV0FnR3hCLElBQUl4RSxFQUFVLENBQUMsSUFBSSxFQUFBMkUsT0FBTyxRQUFTM0IsRUFBYSxJQUFLLElBQUksRUFBQTJCLE9BQU8sT0FBUTNCLEVBQWEsS0FDakY0QixFQUFnQixFQUFBQyxpQkFBaUI3RSxHQUNqQ21FLEVBQUssSUFwQ1QsTUFFSSxjQUNJckUsS0FBSzZDLFlBQWMsR0FHdkIsSUFBSTdFLEdBQ0EsSUFBS0EsRUFBRWdELEVBQUloRCxFQUFFa0QsR0FBSyxHQUFLLEVBSXZCLEdBQStCLEdBQTNCbEIsS0FBSzZDLFlBQVkxQyxPQUFyQixDQUtBLElBQUk2RSxFQUFPaEYsS0FBSzZDLFlBQVk3QyxLQUFLNkMsWUFBWTFDLE9BQU8sR0FDaEQ2RSxFQUFLaEUsR0FBS2hELEVBQUVnRCxHQUFLZ0UsRUFBSzlELEdBQUtsRCxFQUFFa0QsRUFDN0JsQixLQUFLNkMsWUFBWW9DLE1BRWpCakYsS0FBSzZDLFlBQVlxQyxLQUFLbEgsUUFSdEJnQyxLQUFLNkMsWUFBWXFDLEtBQUtsSCxHQVk5QixRQUNJZ0MsS0FBSzZDLFlBQWMsR0FHdkIsT0FDSSxPQUFPLElBQUksRUFBQXNDLEtBQUtuRixLQUFLNkMsZUFTN0JPLEVBQVMwQixHQUNUVixFQUFZVSxFQUFlVCxHQUczQixJQUFJNUIsRUFBMENhLFNBQVNnQix1QkFBdUIsUUFDOUUsSUFBSyxJQUFJNUIsS0FBUWtCLE1BQU1DLEtBQUtwQixHQUFRLENBQ2hDLE1BQU16RSxFQUFJMEYsRUFBc0JoQixHQU9oQ0EsRUFBSzBDLFFBTmEsQ0FBQ3BILEdBQ1IsS0FDSHFHLEVBQUdnQixJQUFJckgsR0FDUG9HLEVBQVlVLEVBQWVULElBR3BCaUIsQ0FBWXRILEdBSS9CLFNBQVN1SCxJQUNMVCxFQUFjSyxLQUFLZCxFQUFHYyxRQUN0QmQsRUFBR21CLFFBQ0hwQixFQUFZVSxFQUFlVCxHQUMzQmpCLEVBQVMwQixHQUx1QnhCLFNBQVNtQyxlQUFlLFFBUWpETCxRQUFVLEtBQ2pCRyxLQUVKakMsU0FBU29DLGlCQUFpQixVQUFZQyxJQUNwQixTQUFWQSxFQUFHekcsS0FDSHFHLE8sOEVDMUlSLGFBQ0EsT0FFTUssRUFBUSxJQUFJLEVBQUFsRCxLQUFLLEVBQUcsUUFDcEJtRCxFQUFRLElBQUksRUFBQW5ELEtBQUssRUFBRyxRQUNwQm9ELEVBQVMsSUFBSSxFQUFBcEQsS0FBSyxFQUFHLFNBQ3JCcUQsRUFBUyxJQUFJLEVBQUFyRCxLQUFLLEVBQUcsU0FFM0IsTUFBTXNELEVBQ0YsV0FDSSxPQUFPLEVBQUFDLFVBQVUsRUFBRyxHQUd4QixnQkFBZ0JDLEVBQW1CaEcsR0FDL0IsSUFBSyxJQUFJdkMsRUFBSSxFQUFHQSxFQUFJLEVBQUdBLElBQ25CdUksRUFBV2pGLElBQUkyRSxFQUFPLElBQUksRUFBQWhFLFdBQWEsRUFBRmpFLEVBQUssSUFDMUN1SSxFQUFXakYsSUFBSTJFLEVBQU8sSUFBSSxFQUFBaEUsV0FBYSxFQUFGakUsRUFBSSxFQUFHLElBQzVDdUksRUFBV2pGLElBQUkyRSxFQUFPLElBQUksRUFBQWhFLFdBQWEsRUFBRmpFLEVBQUssSUFFMUN1SSxFQUFXakYsSUFBSTRFLEVBQU8sSUFBSSxFQUFBakUsV0FBYSxFQUFGakUsRUFBSSxFQUFHLElBQzVDdUksRUFBV2pGLElBQUk0RSxFQUFPLElBQUksRUFBQWpFLFdBQWEsRUFBRmpFLEVBQUssSUFDMUN1SSxFQUFXakYsSUFBSTRFLEVBQU8sSUFBSSxFQUFBakUsV0FBYSxFQUFGakUsRUFBSSxFQUFHLElBR2hEMEUsUUFBUUMsSUFBSTRELEdBR2hCLGFBQWFqRSxFQUF1QkMsRUFBbUJ2QyxFQUFpQndDLEdBQ3BFLEdBQUlBLEVBQVNVLFlBQVkxQyxPQUFTLEVBQzlCLEtBQU0sdUpBS1YsSUFxSGdCcEMsRUFySFp3RyxFQUFRckMsRUFBVzFELElBQUkyRCxFQUFTVSxZQUFZLElBQ2hELEdBQUlaLEdBQWlCc0MsRUFBTTVCLE1BRXZCLE9BREFOLFFBQVFDLElBQUksMkZBQTZGTCxFQUFnQixtQ0FBcUNzQyxFQUFNNUIsTUFBUSxjQUFnQlIsRUFBU2dFLFNBQVcscUJBQXVCbkQsS0FBS0MsVUFBVXNCLEtBQy9PLEdBa0hLeEcsRUE5R0RvRSxFQStHWnBFLEVBQUU4RSxZQUFZdUQsTUFBTSxFQUFHckksRUFBRThFLFlBQVkxQyxTQS9HZlMsUUFBUzVDLElBQzlCLEdBQUlrRSxFQUFXMUQsSUFBSVIsSUFBTSxFQUFBOEQsVUFFckIsT0FEQU8sUUFBUUMsSUFBSSx5RUFBMkVVLEtBQUtDLFVBQVVmLEVBQVcxRCxJQUFJUixJQUFNLE9BQVNnRixLQUFLQyxVQUFVakYsS0FDNUksSUFJZixJQUFJcUksRUFBT0MsRUFBVy9CLEdBR3RCLEdBQW1DLEdBQS9CcEMsRUFBU1UsWUFBWTFDLE9BQWEsQ0FDbEMsSUFBSW9HLEVBQVFwRSxFQUFTVSxZQUFZLEdBQzdCMkQsRUFBTXJFLEVBQVNVLFlBQVksR0FFM0I0RCxHQUFXLEVBVWYsR0FUQUosRUFBS3pGLFFBQVNTLElBQ04xQixFQUFTK0csU0FBU0gsRUFBTyxDQUFDbEYsRUFBSyxTQUFTc0YsT0FBT0gsS0FDL0NDLEdBQVcsR0FHWDlHLEVBQVMrRyxTQUFTSCxFQUFPLENBQUNsRixFQUFLLFVBQVVzRixPQUFPSCxLQUNoREMsR0FBVyxLQUdmQSxFQUNBLE9BQU8sRUFLZixJQUFJRyxFQUFJQyxFQUFPMUUsRUFBVXhDLEVBQVUwRyxHQUNuQyxHQUFTdEYsTUFBTDZGLEVBRUEsT0FEQXZFLFFBQVFDLElBQUksOERBQ0wsRUFJWCxJQUFJLElBQUkzRSxFQUFJLEVBQUdBLEVBQUlpSixFQUFFekcsT0FBUXhDLElBQUssQ0FDOUIsSUFBSWdGLEVBQVFULEVBQVcxRCxJQUFJb0ksRUFBRWpKLElBQUlnRixNQUNqQyxHQUFJQSxHQUFTVixJQUEyQixHQUFWVSxFQUMxQixPQUFPLEVBSWYsT0FBTyxFQUdYLFVBQVVWLEVBQXVCQyxFQUFtQnZDLEVBQWlCd0MsR0FDakUsSUFBSTJFLEVBQUszRSxFQUFTVSxZQUNka0UsRUFBT0QsRUFBR0EsRUFBRzNHLE9BQU8sR0FHeEIrQixFQUFXakIsSUFBSWlCLEVBQVcxRCxJQUFJc0ksRUFBRyxJQUFLQyxHQUN0QzdFLEVBQVdqQixJQUFJLEVBQUFhLFVBQVdnRixFQUFHLElBRzdCLElBQUlGLEVBQUlDLEVBQU8xRSxFQUFVeEMsRUFBVTJHLEVBQVdwRSxFQUFXMUQsSUFBSXVJLEtBQzdESCxXQUFHaEcsUUFBUzVDLElBQ1JrRSxFQUFXakIsSUFBSSxFQUFBYSxVQUFXOUQsS0FJaEIsR0FBVitJLEVBQUs3RixHQUEyQixHQUFqQmUsR0FDZkMsRUFBV2pCLElBQUk2RSxFQUFRaUIsR0FFYixHQUFWQSxFQUFLN0YsR0FBMkIsR0FBakJlLEdBQ2ZDLEVBQVdqQixJQUFJOEUsRUFBUWdCLEdBSS9CLGFBQWE3RyxFQUF3QitCLEVBQXVCQyxHQUN4RCxJQUFJOEUsR0FBVSxFQUNWQyxHQUFVLEVBU2QsT0FSQS9FLEVBQVd0QixRQUFTL0IsSUFDRCxHQUFYQSxFQUFFOEQsUUFDRnFFLEdBQVUsR0FFQyxHQUFYbkksRUFBRThELFFBQ0ZzRSxHQUFVLEtBR2JELEVBRUVDLEdBR0MsRUFGRyxFQUZBLEdBaUNuQixTQUFTWCxFQUFXL0IsR0FTaEIsTUFQa0IsU0FBZEEsRUFBTTNCLEtBQ0MsQ0FBQyxLQUFNLFFBQ1EsR0FBZjJCLEVBQU01QixNQUNOLENBQUMsTUFFRCxDQUFDLFFBS2hCLFNBQVNrRSxFQUFPMUUsRUFBZ0J4QyxFQUFpQjJHLEdBQzdDLElBQUlZLEdBQVksRUFDWkwsRUFBNEIsR0ErQmhDLEdBS0osU0FBY2hFLEVBQWdDTCxHQUMxQyxJQUFLLElBQUk3RSxFQUFJLEVBQUdBLEVBQUlrRixFQUFZMUMsT0FBUXhDLElBQUssQ0FDekMsSUFBSTRJLEVBQVExRCxFQUFZbEYsRUFBRSxHQUN0QjZJLEVBQU0zRCxFQUFZbEYsR0FDdEI2RSxFQUFTK0QsRUFBT0MsSUF2Q3BCVyxDQUFLaEYsRUFBU1UsWUFBYSxDQUFDMEQsRUFBbUJDLEtBQzNDLElBQUlDLEdBQVcsRUFDZkgsRUFBVzFGLFFBQVNTLElBQ2hCLEdBQUkxQixFQUFTK0csU0FBU0gsRUFBTyxDQUFDbEYsRUFBS0EsRUFBSyxPQUFRLFNBQVNzRixPQUFPSCxHQUFNLENBQ2xFQyxHQUFXLEVBRVgsSUFBSVcsRUFBT3pILEVBQVMrRyxTQUFTSCxFQUFPLENBQUNsRixFQUFLLFNBQzFDd0YsRUFBTzNCLEtBQUtrQyxHQUdaekgsRUFBUytHLFNBQVNILEVBQU8sQ0FBQ2xGLEVBQUtBLEVBQUssUUFBUyxVQUFVc0YsT0FBT0gsS0FDOURDLEdBQVcsRUFFQzFGLE9BRFJxRyxFQUFPekgsRUFBUytHLFNBQVNILEVBQU8sQ0FBQ2xGLEVBQUssWUFFdENnQixRQUFRQyxJQUFJLHVDQUVoQkQsUUFBUUMsSUFBSSxpQkFBbUJVLEtBQUtDLFVBQVVtRSxJQUM5Q1AsRUFBTzNCLEtBQUtrQyxHQUNaL0UsUUFBUUMsSUFBSVUsS0FBS0MsVUFBVTRELEVBQU8sUUFJckNKLElBQ0RTLEdBQVksS0FJaEJMLEVBQU8xRyxRQUFVLEdBQ2pCa0MsUUFBUUMsSUFBSVUsS0FBS0MsVUFBVTRELEVBQU8sS0FFbENLLEVBQ0EsT0FBT0wsRUF2RWYsNEJBQWlDM0csR0FDN0IsSUFBSWxDLEVBQUksSUFBSWdJLEVBQ1JxQixFQUFJckosRUFBRTJCLFdBRVYsT0FBTyxJQUFJLEVBQUF1RSxNQUNQLElBQUksRUFBQW9ELEtBQ0FELEVBQ0FySixFQUFFNEIsZ0JBQ0Y1QixFQUFFNkIsYUFDRjdCLEVBQUU4QixVQUNGOUIsRUFBRStCLGNBRU5zSCxFQUNBbkgsSyw4RUNoSlIsYUFHQSxxQkFBMEJjLEVBQVdFLEdBSWpDLElBSEEsSUFBSVIsRUFBUSxJQUFJQyxJQUVaNEcsRUFBVzNELFFBQ1BqRyxFQUFJLEVBQUdBLEVBQUlxRCxFQUFHckQsSUFDbEIsSUFBSyxJQUFJeUMsRUFBSSxFQUFHQSxFQUFHYyxFQUFHZCxJQUNsQm1ILEVBQVNyQyxLQUFLLElBQUksRUFBQXRELFdBQVdqRSxFQUFHeUMsSUFJeEMsSUFBSW9ILEVBQU8sSUFBSSxFQUFBaEcsVUFBVSxRQUNyQmlHLEVBQUssSUFBSSxFQUFBakcsVUFBVSxNQUNuQmtHLEVBQU8sSUFBSSxFQUFBbEcsVUFBVSxRQUNyQm1HLEVBQVEsSUFBSSxFQUFBbkcsVUFBVSxTQTBCMUIsT0F2QkErRixFQUFTM0csUUFBU2dILElBQ2RsSCxFQUFNTyxJQUFJMkcsRUFBTyxJQUFJakgsS0FDckI0RyxFQUFTM0csUUFBU2lILEksWUFDVkQsRUFBTTVHLEdBQUs2RyxFQUFNN0csSUFDYjRHLEVBQU0xRyxHQUFLMkcsRUFBTTNHLEVBQUksRUFDTCxRQUFoQixFQUFBUixFQUFNbEMsSUFBSW9KLFVBQU0sU0FBRTNHLElBQUk0RyxFQUFPTCxHQUN0QkksRUFBTTFHLEdBQUsyRyxFQUFNM0csRUFBSSxJQUNaLFFBQWhCLEVBQUFSLEVBQU1sQyxJQUFJb0osVUFBTSxTQUFFM0csSUFBSTRHLEVBQU9KLEtBSWpDRyxFQUFNMUcsR0FBSzJHLEVBQU0zRyxJQUNiMEcsRUFBTTVHLEdBQUs2RyxFQUFNN0csRUFBSSxFQUVMLFFBQWhCLEVBQUFOLEVBQU1sQyxJQUFJb0osVUFBTSxTQUFFM0csSUFBSTRHLEVBQU9ILEdBQ3RCRSxFQUFNNUcsR0FBSzZHLEVBQU03RyxFQUFJLElBRVosUUFBaEIsRUFBQU4sRUFBTWxDLElBQUlvSixVQUFNLFNBQUUzRyxJQUFJNEcsRUFBT0YsU0FNdEMsSUFBSSxFQUFBRyxNQUFNcEgiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiLy8gSGVyZWluIGxpZXMgdGhlIGxvZ2ljIGZvciBkZXNjcmliaW5nIGEgcGVyZmVjdCBpbmZvcm1hdGlvbiBib2FyZCBnYW1lIGF0IGFuIGFic3RyYWN0IGxldmVsXG5cbmV4cG9ydCBjbGFzcyBUZXN0ZXIge1xuICAgIHRlc3QoKSB7XG4gICAgICAgIHJldHVybiBcInllYWgsIEknbSB3b3JraW5nXCJcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBnYW1lIHtcbiAgICBzdGFydGluZ1Bvc2l0aW9uOiAocGxheWVyczogQXJyYXk8cGxheWVyPikgPT4gYm9hcmRcbiAgICB2YWxpZGF0ZU1vdmU6IChjdXJyZW50UGxheWVyOiBudW1iZXIsIGJvYXJkU3RhdGU6IGJvYXJkLCB0b3BvbG9neTogZ3JhcGgsIG5leHRNb3ZlOiBtb3ZlKSA9PiBib29sZWFuXG4gICAgYXBwbHlNb3ZlOiAoY3VycmVudFBsYXllcjogbnVtYmVyLCBib2FyZFN0YXRlOiBib2FyZCwgdG9wb2xvZ3k6IGdyYXBoLCBuZXh0TW92ZTogbW92ZSkgPT4gdm9pZFxuICAgIHdpbkNvbmRpdGlvbjogKHBsYXllcnM6IEFycmF5PHBsYXllcj4sIGN1cnJlbnRQbGF5ZXI6IG51bWJlciwgYm9hcmRTdGF0ZTogYm9hcmQpID0+IG51bWJlclxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgICAgICB0b3BvbG9neTogZ3JhcGgsIFxuICAgICAgICAgICAgaW5pdGlhbGlzZVN0YXRlOiAoZW1wdHlTdGF0ZTogYm9hcmQsIHBsYXllcnM6IEFycmF5PHBsYXllcj4pID0+IHZvaWQsXG4gICAgICAgICAgICB2YWxpZGF0ZU1vdmU6IChjdXJyZW50UGxheWVyOiBudW1iZXIsIGJvYXJkU3RhdGU6IGJvYXJkLCB0b3BvbG9neTogZ3JhcGgsIG5leHRNb3ZlOiBtb3ZlKSA9PiBib29sZWFuLFxuICAgICAgICAgICAgYXBwbHlNb3ZlOiAoY3VycmVudFBsYXllcjogbnVtYmVyLCBib2FyZFN0YXRlOiBib2FyZCwgdG9wb2xvZ3k6IGdyYXBoLCBuZXh0TW92ZTogbW92ZSkgPT4gdm9pZCxcbiAgICAgICAgICAgIHdpbkNvbmRpdGlvbjogKHBsYXllcnM6IEFycmF5PHBsYXllcj4sIGN1cnJlbnRQbGF5ZXI6IG51bWJlciwgYm9hcmRTdGF0ZTogYm9hcmQpID0+IG51bWJlclxuICAgICAgICApe1xuICAgICAgICB0aGlzLnN0YXJ0aW5nUG9zaXRpb24gPSAocGxheWVyczogQXJyYXk8cGxheWVyPikgPT4ge1xuICAgICAgICAgICAgY29uc2lzdGVudFBsYXllcnMocGxheWVycylcbiAgICAgICAgICAgIHZhciBiID0gdG9wb2xvZ3kuYm9hcmQoKVxuICAgICAgICAgICAgaW5pdGlhbGlzZVN0YXRlKGIsIHBsYXllcnMpXG4gICAgICAgICAgICByZXR1cm4gYlxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsaWRhdGVNb3ZlID0gdmFsaWRhdGVNb3ZlXG4gICAgICAgIHRoaXMuYXBwbHlNb3ZlID0gYXBwbHlNb3ZlXG4gICAgICAgIHRoaXMud2luQ29uZGl0aW9uID0gd2luQ29uZGl0aW9uXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgcGxheWVyIHtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBjb2xvdXI6IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBjb2xvdXI6IHN0cmluZykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgICAgIHRoaXMuY29sb3VyID0gY29sb3VyXG4gICAgfVxufVxuXG4vLyBUaGlzIGdyYXBoIHJlcHJlc2VudHMgXG4vLyBUT0RPOiB1c2UgZ3JhcGggZGVwZW5kZW5jeSAvLyB2YXIgZ3JhcGggPSByZXF1aXJlKFwiZ3JhcGgtZGF0YS1zdHJ1Y3R1cmVcIilcbmV4cG9ydCBjbGFzcyBncmFwaCB7XG4gICAgLy8gVGhpcyBpcyBhIHR3byBieSB0d28gbWF0cml4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBncmFwaFxuICAgIC8vIE1hcCBmcm9tIHggdG8geSB0byB4IHRvIHkgdG8gZGlyZWN0aW9uXG4gICAgZWRnZXM6IE1hcDxudW1iZXIsIE1hcDxudW1iZXIsIE1hcDxudW1iZXIsIE1hcDxudW1iZXIsIGRpcmVjdGlvbj4+Pj5cbiAgICAvLyBlZGdlczogTWFwPGNvb3JkaW5hdGUsIE1hcDxjb29yZGluYXRlLCBkaXJlY3Rpb24+PlxuXG5cbiAgICBjb25zdHJ1Y3RvcihlZGdlczogTWFwPGNvb3JkaW5hdGUsIE1hcDxjb29yZGluYXRlLCBkaXJlY3Rpb24+Pikge1xuICAgICAgICB0aGlzLmVkZ2VzID0gbmV3IE1hcCgpXG4gICAgICAgIGVkZ2VzLmZvckVhY2goKG0xOiBNYXA8Y29vcmRpbmF0ZSwgZGlyZWN0aW9uPiwgYzE6IGNvb3JkaW5hdGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVkZ2VzLmdldChjMS54KSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkZ2VzLnNldChjMS54LCBuZXcgTWFwKCkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmVkZ2VzLmdldChjMS54KT8uZ2V0KGMxLnkpID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRnZXMuZ2V0KGMxLngpPy5zZXQoYzEueSwgbmV3IE1hcCgpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtMS5mb3JFYWNoKChkOiBkaXJlY3Rpb24sIGMyOiBjb29yZGluYXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRnZXMuZ2V0KGMxLngpPy5nZXQoYzEueSk/LmdldChjMi54KSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGdlcy5nZXQoYzEueCk/LmdldChjMS55KT8uc2V0KGMyLngsIG5ldyBNYXAoKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVkZ2VzLmdldChjMS54KT8uZ2V0KGMxLnkpPy5nZXQoYzIueCk/LnNldChjMi55LCBkKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdHJhdmVyc2UoYzogY29vcmRpbmF0ZSwgZGlyZWNpdG9uczogQXJyYXk8c3RyaW5nPikge1xuICAgICAgICBkaXJlY2l0b25zLmZvckVhY2goKGRpcjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICB2YXIgbmV4dEhvcCA9IHRoaXMuaG9wKGMsIGRpcilcbiAgICAgICAgICAgIGlmIChuZXh0SG9wID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYyA9IG5leHRIb3BcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGNcbiAgICB9XG5cbiAgICBob3AoYzogY29vcmRpbmF0ZSwgZGlyZWN0aW9uOiBzdHJpbmcpIHtcbiAgICAgICAgdmFyIGFkamFjZW50cyA9IHRoaXMuZWRnZXMuZ2V0KGMueCk/LmdldChjLnkpXG4gICAgICAgIGlmIChhZGphY2VudHMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFt4LCB5bWFwXSBvZiBhZGphY2VudHMuZW50cmllcygpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFt5LCBkaXJdIG9mIHltYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpci5kaXIgPT0gZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgY29vcmRpbmF0ZSh4LCB5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGJvYXJkKCk6Ym9hcmQge1xuICAgICAgICB2YXIgYjogTWFwPGNvb3JkaW5hdGUsIHRpbGU+ID0gbmV3IE1hcCgpXG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IFt4LCB5bWFwXSBvZiB0aGlzLmVkZ2VzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFt5LCBfXSBvZiB5bWFwKSB7XG4gICAgICAgICAgICAgICAgYi5zZXQobmV3IGNvb3JkaW5hdGUoeCwgeSksIGVtcHR5VGlsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGJvYXJkKGIpXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgZGlyZWN0aW9uIHtcbiAgICBkaXI6IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3IoZGlyOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5kaXIgPSBkaXJcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBtYXRjaCB7XG4gICAgLy8gQ29uc3RhbnQgZGVmaW5pdGlvblxuICAgIGdhbWVUeXBlOiBnYW1lXG4gICAgdG9wb2xvZ3k6IGdyYXBoXG4gICAgcGxheWVyczogQXJyYXk8cGxheWVyPlxuXG4gICAgLy8gQ2hhbmdpbmcgc3RhdGVcbiAgICBtb3ZlczogQXJyYXk8bW92ZT5cbiAgICBjdXJyZW50UGxheWVyOiBudW1iZXJcbiAgICBib2FyZFN0YXRlOiBib2FyZFxuXG4gICAgY29uc3RydWN0b3IoZ2FtZVR5cGU6IGdhbWUsIHRvcG9sb2d5OiBncmFwaCwgcGxheWVyczogQXJyYXk8cGxheWVyPikge1xuICAgICAgICB0aGlzLmdhbWVUeXBlID0gZ2FtZVR5cGVcbiAgICAgICAgdGhpcy50b3BvbG9neSA9IHRvcG9sb2d5XG4gICAgICAgIHRoaXMucGxheWVycyA9IHBsYXllcnNcbiAgICAgICAgdGhpcy5tb3ZlcyA9IFtdXG4gICAgICAgIHRoaXMuY3VycmVudFBsYXllciA9IDBcbiAgICAgICAgdGhpcy5ib2FyZFN0YXRlID0gZ2FtZVR5cGUuc3RhcnRpbmdQb3NpdGlvbihwbGF5ZXJzKVxuICAgIH1cblxuICAgIG1vdmUobmV4dE1vdmU6IG1vdmUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVUeXBlLnZhbGlkYXRlTW92ZSh0aGlzLmN1cnJlbnRQbGF5ZXIsIHRoaXMuYm9hcmRTdGF0ZSwgdGhpcy50b3BvbG9neSwgbmV4dE1vdmUpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImludmFsaWQgbW92ZVwiKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdhbWVUeXBlLmFwcGx5TW92ZSh0aGlzLmN1cnJlbnRQbGF5ZXIsIHRoaXMuYm9hcmRTdGF0ZSwgdGhpcy50b3BvbG9neSwgbmV4dE1vdmUpXG4gICAgICAgIHRoaXMuY3VycmVudFBsYXllciA9ICh0aGlzLmN1cnJlbnRQbGF5ZXIgKyAxKSAlIHRoaXMucGxheWVycy5sZW5ndGhcblxuICAgICAgICB2YXIgd2lubmluZ1BsYXllciA9IHRoaXMuZ2FtZVR5cGUud2luQ29uZGl0aW9uKHRoaXMucGxheWVycywgdGhpcy5jdXJyZW50UGxheWVyLCB0aGlzLmJvYXJkU3RhdGUpXG4gICAgICAgIGlmICh3aW5uaW5nUGxheWVyICE9IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJzW3dpbm5pbmdQbGF5ZXJdXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB3aW5uZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVUeXBlLndpbkNvbmRpdGlvbih0aGlzLnBsYXllcnMsIHRoaXMuY3VycmVudFBsYXllciwgdGhpcy5ib2FyZFN0YXRlKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIGJvYXJkIHtcbiAgICBzdGF0ZTogQXJyYXk8QXJyYXk8dGlsZT4+XG5cbiAgICBjb25zdHJ1Y3RvcihzdGF0ZTogTWFwPGNvb3JkaW5hdGUsIHRpbGU+KSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBbXVxuICAgICAgICBzdGF0ZS5mb3JFYWNoKCh0OiB0aWxlLCBjOiBjb29yZGluYXRlKT0+e1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGVbYy54XSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh0LCBjKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZVtjLnhdW2MueV0gPSB0XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZm9yRWFjaChjYWxsYmFjazogKHQ6IHRpbGUpPT52b2lkKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuZm9yRWFjaCgodGlsZXM6IHRpbGVbXSkgPT4ge1xuICAgICAgICAgICAgdGlsZXMuZm9yRWFjaCgodDogdGlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHQpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHNldCh0OiB0aWxlLCBjOiBjb29yZGluYXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlW2MueF0gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlW2MueF0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGVbYy54XVtjLnldID0gdFxuICAgIH1cblxuICAgIGdldChjOiBjb29yZGluYXRlKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5zdGF0ZVtjLnhdW2MueV1cbiAgICAgICAgaWYgKHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZW1wdHlUaWxlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyB0aWxlIHtcbiAgICAvLyBwbGF5ZXIgbnVtYmVyIG9mIG93bmVyXG4gICAgb3duZXI6IG51bWJlclxuICAgIHR5cGU6IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3Iob3duZXI6IG51bWJlciwgdHlwZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZW1wdHlUaWxlID0gbmV3IHRpbGUoLTEsIFwiZW1wdHlcIilcblxuZXhwb3J0IGNsYXNzIG1vdmUge1xuICAgIGNvb3JkaW5hdGVzOiBBcnJheTxjb29yZGluYXRlPlxuXG4gICAgY29uc3RydWN0b3IoY29vcmRpbmF0ZXM6IEFycmF5PGNvb3JkaW5hdGU+KSB7XG4gICAgICAgIHRoaXMuY29vcmRpbmF0ZXMgPSBjb29yZGluYXRlc1xuICAgIH1cblxuICAgIHN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRpbmF0ZXMubWFwKChjOiBjb29yZGluYXRlKT0+e3JldHVybiBcIihcIiArIGMueCArIFwiLFwiICsgYy55ICsgXCIpXCJ9KS5qb2luKFwiLCBcIilcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBjb29yZGluYXRlIHtcbiAgICB4OiBudW1iZXJcbiAgICB5OiBudW1iZXJcblxuICAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgIH1cblxuICAgIGVxdWFscyhjOiBjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKSA9PSBKU09OLnN0cmluZ2lmeShjKVxuICAgIH1cbn1cblxuLy8gVXRpbGl0eSBmdW5jdGlvbnNcbi8vIFRPRE86IG1vdmUgdG8gc2VwYXJhdGUgZmlsZXNcblxuLy8gQ2hlY2sgY29uc2lzdGVuY3kgb2YgcGxheWVyc1xuZnVuY3Rpb24gY29uc2lzdGVudFBsYXllcnMocGxheWVyczogQXJyYXk8cGxheWVyPikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGxheWVycy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IGkrMTsgaiA8IHBsYXllcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBwID0gcGxheWVyc1tpXVxuICAgICAgICAgICAgdmFyIHEgPSBwbGF5ZXJzW2pdXG4gICAgICAgICAgICBpZiAocC5uYW1lID09IHEubmFtZSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwidHdvIHBsYXllcnMgaGF2ZSBuYW1lIFwiICsgcC5uYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocC5jb2xvdXIgPT0gcS5jb2xvdXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcInR3byBwbGF5ZXJzIGhhdmUgY29sb3VyIFwiICsgcC5jb2xvdXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQge25ld0NoZWNrZXJzTWF0Y2h9IGZyb20gJy4vZ2FtZXMvY2hlY2tlcnMvY2hlY2tlcnMnXG5pbXBvcnQge3BsYXllciwgdGlsZSwgbWF0Y2gsIGNvb3JkaW5hdGUsIG1vdmV9IGZyb20gJy4vZ2FtZS9nYW1lJ1xuXG4vLyBEZWZpbmUgcmVuZGVyaW5nXG5cbnZhciB0aWxlQ29sb3VyMSA9IFwiYmxhY2tcIlxudmFyIHRpbGVDb2xvdXIyID0gXCJyZWRcIlxudmFyIHBsYXllckNvbG91ciA9IFtcIndoaXRlXCIsIFwidmlvbGV0XCJdXG52YXIgcGxheWVySGlnaExpZ2h0ID0gW1wieWVsbG93XCIsIFwicHVycGxlXCJdXG52YXIgc2VsZWN0ZWRIaWdobGlnaHQgPSBcIjQ0NFwiXG5cbmZ1bmN0aW9uIHNldFRpdGxlKG06IG1hdGNoKSB7XG4gICAgdmFyIHRpdGxlID0gPEhUTUxIZWFkaW5nRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpXG4gICAgY29uc29sZS5sb2coXCJ3b3JraW5nP1wiKVxuICAgIHRpdGxlLmlubmVySFRNTCA9IG0ud2lubmVyKCkgPT0gLTE/IHBsYXllcnNbbS5jdXJyZW50UGxheWVyXS5uYW1lICsgXCIncyB0dXJuXCI6IHBsYXllcnNbbS53aW5uZXIoKV0ubmFtZSArIFwiIGlzIHRoZSB3aW5uZXIhISFcIlxufVxuXG5mdW5jdGlvbiBjb29yZGluYXRlRnJvbUVsZW1lbnQodGlsZTogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB2YXIgY2xhc3NlcyA9IEFycmF5LmZyb20odGlsZS5jbGFzc0xpc3QpXG4gICAgdmFyIHJvdyA9IC0xXG4gICAgdmFyIGNvbHVtbiA9IC0xXG4gICAgY2xhc3Nlcy5mb3JFYWNoKChjbGFzc05hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoY2xhc3NOYW1lLm1hdGNoKC9yb3cqLykpIHtcbiAgICAgICAgICAgIHJvdyA9ICtjbGFzc05hbWUucmVwbGFjZShcInJvd1wiLCAnJylcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xhc3NOYW1lLm1hdGNoKC9jb2x1bW4qLykpIHtcbiAgICAgICAgICAgIGNvbHVtbiA9ICtjbGFzc05hbWUucmVwbGFjZShcImNvbHVtblwiLCAnJylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAocm93ID09IC0xIHx8IGNvbHVtbiA9PSAtMSkge1xuICAgICAgICB0aHJvdyBcIm5vIHJvdyBmb3VuZDogcm93OiBcIiArIHJvdyArIFwiLCBjb2x1bW46IFwiICsgY29sdW1uXG4gICAgfVxuICAgIHJldHVybiBuZXcgY29vcmRpbmF0ZShjb2x1bW4sIHJvdylcbn1cblxuZnVuY3Rpb24gcmVuZGVyQm9hcmQobTogbWF0Y2gsIG1oOiBtb3ZlSGFuZGxlcikge1xuICAgIHZhciB0aWxlcyA9IDxIVE1MQ29sbGVjdGlvbk9mPEhUTUxEaXZFbGVtZW50Pj5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGlsZVwiKVxuICAgIGZvciAobGV0IHRpbGUgb2YgQXJyYXkuZnJvbSh0aWxlcykpIHsgICAgICAgIFxuICAgICAgICB2YXIgcGllY2UgPSA8SFRNTERpdkVsZW1lbnQ+dGlsZS5jaGlsZE5vZGVzWzBdXG4gICAgICAgIHZhciBjID0gY29vcmRpbmF0ZUZyb21FbGVtZW50KHRpbGUpXG5cbiAgICAgICAgaWYgKChjLnggKyBjLnkpICUgMiA9PSAwKSB7XG4gICAgICAgICAgICB0aWxlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRpbGVDb2xvdXIxXG4gICAgICAgICAgICBwaWVjZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aWxlQ29sb3VyMVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGlsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aWxlQ29sb3VyMlxuICAgICAgICAgICAgcGllY2Uuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGlsZUNvbG91cjJcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBnYW1lVGlsZSA9IG0uYm9hcmRTdGF0ZS5nZXQoYylcbiAgICAgICAgaWYgKGdhbWVUaWxlLm93bmVyICE9IC0xICYmIGdhbWVUaWxlLnR5cGUgIT0gXCJlbXB0eVwiKSB7XG4gICAgICAgICAgICBwaWVjZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwbGF5ZXJDb2xvdXJbZ2FtZVRpbGUub3duZXJdXG4gICAgICAgICAgICBpZiAoZ2FtZVRpbGUudHlwZSA9PSBcInF1ZWVuXCIpIHtcbiAgICAgICAgICAgICAgICBwaWVjZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwbGF5ZXJIaWdoTGlnaHRbZ2FtZVRpbGUub3duZXJdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgbWguY29vcmRpbmF0ZXMuZm9yRWFjaCgobW92ZUM6IGNvb3JkaW5hdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChjLnggPT0gbW92ZUMueCAmJiBjLnkgPT0gbW92ZUMueSAmJiAoYy54ICsgYy55KSAlIDIgPT0gMCkge1xuICAgICAgICAgICAgICAgIHRpbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2VsZWN0ZWRIaWdobGlnaHRcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZVRpbGUub3duZXIgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGllY2Uuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2VsZWN0ZWRIaWdobGlnaHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG4vLyBoYW5kbGUgZ2FtZSBzdGF0ZSBpbnB1dFxuY2xhc3MgbW92ZUhhbmRsZXIge1xuICAgIGNvb3JkaW5hdGVzOiBBcnJheTxjb29yZGluYXRlPlxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvb3JkaW5hdGVzID0gW11cbiAgICB9XG5cbiAgICBhZGQoYzogY29vcmRpbmF0ZSkge1xuICAgICAgICBpZiAoKGMueCArIGMueSkgJSAyICE9IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXMucHVzaChjKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGFzdCA9IHRoaXMuY29vcmRpbmF0ZXNbdGhpcy5jb29yZGluYXRlcy5sZW5ndGgtMV1cbiAgICAgICAgaWYgKGxhc3QueCA9PSBjLnggJiYgbGFzdC55ID09IGMueSkge1xuICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlcy5wb3AoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlcy5wdXNoKGMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5jb29yZGluYXRlcyA9IFtdXG4gICAgfVxuXG4gICAgbW92ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtb3ZlKHRoaXMuY29vcmRpbmF0ZXMpXG4gICAgfVxufVxuXG4vLyBDcmVhdGUgYW5kIHJlbmRlciBpbml0aWFsIHN0YXRlc1xudmFyIHBsYXllcnMgPSBbbmV3IHBsYXllcihcIkJsYWtlXCIsIHBsYXllckNvbG91clswXSksIG5ldyBwbGF5ZXIoXCJBbmphXCIsIHBsYXllckNvbG91clsxXSldXG52YXIgbWF0Y2hJbnN0YW5jZSA9IG5ld0NoZWNrZXJzTWF0Y2gocGxheWVycylcbnZhciBtaCA9IG5ldyBtb3ZlSGFuZGxlcigpXG5cbnNldFRpdGxlKG1hdGNoSW5zdGFuY2UpXG5yZW5kZXJCb2FyZChtYXRjaEluc3RhbmNlLCBtaClcblxuLy8gQWRkIGludGVyYWN0aXZpdHlcbnZhciB0aWxlcyA9IDxIVE1MQ29sbGVjdGlvbk9mPEhUTUxEaXZFbGVtZW50Pj5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGlsZVwiKVxuZm9yIChsZXQgdGlsZSBvZiBBcnJheS5mcm9tKHRpbGVzKSkge1xuICAgIGNvbnN0IGMgPSBjb29yZGluYXRlRnJvbUVsZW1lbnQodGlsZSlcbiAgICB2YXIgbWFrZUNsaWNrZXIgPSAoYzogY29vcmRpbmF0ZSkgPT4ge1xuICAgICAgICByZXR1cm4gKCkgPT4geyBcbiAgICAgICAgICAgIG1oLmFkZChjKVxuICAgICAgICAgICAgcmVuZGVyQm9hcmQobWF0Y2hJbnN0YW5jZSwgbWgpXG4gICAgICAgIH1cbiAgICB9XG4gICAgdGlsZS5vbmNsaWNrID0gbWFrZUNsaWNrZXIoYylcbn1cblxudmFyIG1vdmVCdXR0b24gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb3ZlXCIpXG5mdW5jdGlvbiBtYWtlTW92ZSgpe1xuICAgIG1hdGNoSW5zdGFuY2UubW92ZShtaC5tb3ZlKCkpXG4gICAgbWguY2xlYXIoKVxuICAgIHJlbmRlckJvYXJkKG1hdGNoSW5zdGFuY2UsIG1oKVxuICAgIHNldFRpdGxlKG1hdGNoSW5zdGFuY2UpXG59XG5cbm1vdmVCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICBtYWtlTW92ZSgpXG59XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGV2LmtleSA9PSBcIkVudGVyXCIpIHtcbiAgICAgICAgbWFrZU1vdmUoKVxuICAgIH1cbn0pIiwiaW1wb3J0IHsgZ2FtZSwgbWF0Y2gsIGdyYXBoLCBwbGF5ZXIsIGJvYXJkLCBtb3ZlLCBjb29yZGluYXRlLCB0aWxlLCBlbXB0eVRpbGUgfSBmcm9tIFwiLi4vLi4vZ2FtZS9nYW1lXCJcbmltcG9ydCB7IHJpZ2h0R3JpZCB9IGZyb20gXCIuLi8uLi9ib2FyZHMvYm9hcmRzXCJcblxuY29uc3QgcGF3bjAgPSBuZXcgdGlsZSgwLCBcInBhd25cIilcbmNvbnN0IHBhd24xID0gbmV3IHRpbGUoMSwgXCJwYXduXCIpXG5jb25zdCBxdWVlbjAgPSBuZXcgdGlsZSgwLCBcInF1ZWVuXCIpXG5jb25zdCBxdWVlbjEgPSBuZXcgdGlsZSgxLCBcInF1ZWVuXCIpXG5cbmNsYXNzIENoZWNrZXJzIHtcbiAgICB0b3BvbG9neSgpOmdyYXBoIHtcbiAgICAgICAgcmV0dXJuIHJpZ2h0R3JpZCg4LCA4KVxuICAgIH1cblxuICAgIGluaXRpYWxpc2VTdGF0ZShlbXB0eVN0YXRlOiBib2FyZCwgcGxheWVyczogQXJyYXk8cGxheWVyPikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgZW1wdHlTdGF0ZS5zZXQocGF3bjAsIG5ldyBjb29yZGluYXRlKGkqMiwgMCkpXG4gICAgICAgICAgICBlbXB0eVN0YXRlLnNldChwYXduMCwgbmV3IGNvb3JkaW5hdGUoaSoyKzEsIDEpKVxuICAgICAgICAgICAgZW1wdHlTdGF0ZS5zZXQocGF3bjAsIG5ldyBjb29yZGluYXRlKGkqMiwgMikpXG5cbiAgICAgICAgICAgIGVtcHR5U3RhdGUuc2V0KHBhd24xLCBuZXcgY29vcmRpbmF0ZShpKjIrMSwgNSkpXG4gICAgICAgICAgICBlbXB0eVN0YXRlLnNldChwYXduMSwgbmV3IGNvb3JkaW5hdGUoaSoyLCA2KSlcbiAgICAgICAgICAgIGVtcHR5U3RhdGUuc2V0KHBhd24xLCBuZXcgY29vcmRpbmF0ZShpKjIrMSwgNykpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhlbXB0eVN0YXRlKVxuICAgIH1cblxuICAgIHZhbGlkYXRlTW92ZShjdXJyZW50UGxheWVyOiBudW1iZXIsIGJvYXJkU3RhdGU6IGJvYXJkLCB0b3BvbG9neTogZ3JhcGgsIG5leHRNb3ZlOiBtb3ZlKTpib29sZWFuIHtcbiAgICAgICAgaWYgKG5leHRNb3ZlLmNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHRocm93IFwiYSBtb3ZlIGluIGNoZWNrZXJzIGNvbnNpc3RzIG9mIGF0IGxlYXN0IHR3byBjb29yZGluYXRlcywgdGhlIHBvc2l0aW9uIG9mIHRoZSBwaWVjZSB0byBtb3ZlLCB0aGUgcG9zaXRpb24gaXQgbW92ZXMgdG8sIGFuZCBhbnkgcG9zaXRpb25zIGl0IG1vdmVzIHZpYVwiXG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIHBpZWNlIGlzIG9mIHRoZSByaWdodCBwbGF5ZXJcbiAgICAgICAgdmFyIHBpZWNlID0gYm9hcmRTdGF0ZS5nZXQobmV4dE1vdmUuY29vcmRpbmF0ZXNbMF0pXG4gICAgICAgIGlmIChjdXJyZW50UGxheWVyICE9IHBpZWNlLm93bmVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImludmFsaWQgbW92ZTogZmlyc3QgY29vcmRpbmF0ZSBpbiBhIG1vdmUgc2hvdWxkIGJlIHRoZSBjdXJyZW50IHBsYXllci5cXG5DdXJyZW50IHBsYXllcjogXCIgKyBjdXJyZW50UGxheWVyICsgXCIsIHBsYXllciBvd25pbmcgc2VsZWN0ZWQgcGllY2U6IFwiICsgcGllY2Uub3duZXIgKyBcIlxcbkZvciBtb3ZlIFwiICsgbmV4dE1vdmUuc3RyaW5nKCkgKyBcIlxcblNlbGVjdGVkIHBpZWNlOiBcIiArIEpTT04uc3RyaW5naWZ5KHBpZWNlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIHBpZWNlIGlzIG1vdmluZyB0byBhbmQgdmlhIGVtcHR5IHNwYWNlc1xuICAgICAgICBkZXN0aW5hdGlvbnNJbihuZXh0TW92ZSkuZm9yRWFjaCgoYzogY29vcmRpbmF0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGJvYXJkU3RhdGUuZ2V0KGMpICE9IGVtcHR5VGlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW52YWxpZCBtb3ZlOiBwaWVjZXMgbXVzdCBob3AgdG8gYW5kIHZpYSBlbXB0eSB0aWxlc1xcbk5vbi1lbXB0eSB0aWxlOiBcIiArIEpTT04uc3RyaW5naWZ5KGJvYXJkU3RhdGUuZ2V0KGMpKSArIFwiIGF0IFwiICsgSlNPTi5zdHJpbmdpZnkoYykpIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHZhciBkaXJzID0gZGlyZWN0aW9ucyhwaWVjZSlcbiAgICAgICAgXG4gICAgICAgIC8vIGlmIHdlIGFyZSBvbmx5IG1vdmluZyBvbmUgc3F1YXJlLCBlbnN1cmUgaXQncyBpbiBhIHZhbGlkIGRpcmVjdGlvblxuICAgICAgICBpZiAobmV4dE1vdmUuY29vcmRpbmF0ZXMubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IG5leHRNb3ZlLmNvb3JkaW5hdGVzWzBdXG4gICAgICAgICAgICB2YXIgZW5kID0gbmV4dE1vdmUuY29vcmRpbmF0ZXNbMV1cblxuICAgICAgICAgICAgdmFyIGhvcFZhbGlkID0gZmFsc2VcbiAgICAgICAgICAgIGRpcnMuZm9yRWFjaCgoZGlyOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodG9wb2xvZ3kudHJhdmVyc2Uoc3RhcnQsIFtkaXIsIFwibGVmdFwiXSkuZXF1YWxzKGVuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9wVmFsaWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRvcG9sb2d5LnRyYXZlcnNlKHN0YXJ0LCBbZGlyLCBcInJpZ2h0XCJdKS5lcXVhbHMoZW5kKSkge1xuICAgICAgICAgICAgICAgICAgICBob3BWYWxpZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGhvcFZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IGFsbCBwYXRocyBiZXR3ZWVuIGFkamFjZW50IHBvc2l0aW9ucyBhcmUgdHdvIHN0ZXBzIGluIGEgdmFsaWQgZGlyZWN0aW9uXG4gICAgICAgIHZhciBoID0gaG9wcGVkKG5leHRNb3ZlLCB0b3BvbG9neSwgZGlycylcbiAgICAgICAgaWYgKGggPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImludmFsaWQgbW92ZTogaG9wcyBtdXN0IGJlIHR3byBzdGVwcyBpbiBhIHZhbGlkIGRpcmVjdGlvblwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBlbnN1cmUgdGhhdCBhbGwgaG9wcGVkIHBvc2l0aW9ucyBoYXZlIGFuIG9wcG9zaW5nIHBsYXllclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG93bmVyID0gYm9hcmRTdGF0ZS5nZXQoaFtpXSkub3duZXJcbiAgICAgICAgICAgIGlmIChvd25lciA9PSBjdXJyZW50UGxheWVyIHx8IG93bmVyID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGFwcGx5TW92ZShjdXJyZW50UGxheWVyOiBudW1iZXIsIGJvYXJkU3RhdGU6IGJvYXJkLCB0b3BvbG9neTogZ3JhcGgsIG5leHRNb3ZlOiBtb3ZlKSB7XG4gICAgICAgIHZhciBjcyA9IG5leHRNb3ZlLmNvb3JkaW5hdGVzXG4gICAgICAgIHZhciBkZXN0ID0gY3NbY3MubGVuZ3RoLTFdXG5cbiAgICAgICAgLy8gTW92ZSBwaWVjZSBmcm9tIHN0YXJ0IHRvIGRlc3RpbmF0aW9uXG4gICAgICAgIGJvYXJkU3RhdGUuc2V0KGJvYXJkU3RhdGUuZ2V0KGNzWzBdKSwgZGVzdClcbiAgICAgICAgYm9hcmRTdGF0ZS5zZXQoZW1wdHlUaWxlLCBjc1swXSlcblxuICAgICAgICAvLyBSZW1vdmUgaG9wcGVkIHBpZWNlc1xuICAgICAgICB2YXIgaCA9IGhvcHBlZChuZXh0TW92ZSwgdG9wb2xvZ3ksIGRpcmVjdGlvbnMoYm9hcmRTdGF0ZS5nZXQoZGVzdCkpKVxuICAgICAgICBoPy5mb3JFYWNoKChjOiBjb29yZGluYXRlKT0+e1xuICAgICAgICAgICAgYm9hcmRTdGF0ZS5zZXQoZW1wdHlUaWxlLCBjKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFByb21vdGUgcGllY2VcbiAgICAgICAgaWYgKGRlc3QueSA9PSA3ICYmIGN1cnJlbnRQbGF5ZXIgPT0gMCkge1xuICAgICAgICAgICAgYm9hcmRTdGF0ZS5zZXQocXVlZW4wLCBkZXN0KVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZXN0LnkgPT0gMCAmJiBjdXJyZW50UGxheWVyID09IDEpIHtcbiAgICAgICAgICAgIGJvYXJkU3RhdGUuc2V0KHF1ZWVuMSwgZGVzdClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdpbkNvbmRpdGlvbihwbGF5ZXJzOiBBcnJheTxwbGF5ZXI+LCBjdXJyZW50UGxheWVyOiBudW1iZXIsIGJvYXJkU3RhdGU6IGJvYXJkKTpudW1iZXIge1xuICAgICAgICB2YXIgcDBBbGl2ZSA9IGZhbHNlXG4gICAgICAgIHZhciBwMUFsaXZlID0gZmFsc2VcbiAgICAgICAgYm9hcmRTdGF0ZS5mb3JFYWNoKCh0OiB0aWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAodC5vd25lciA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcDBBbGl2ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0Lm93bmVyID09IDEpIHtcbiAgICAgICAgICAgICAgICBwMUFsaXZlID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFwMEFsaXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICB9IGlmICghcDFBbGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTFcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdDaGVja2Vyc01hdGNoKHBsYXllcnM6IEFycmF5PHBsYXllcj4pOm1hdGNoIHtcbiAgICB2YXIgYyA9IG5ldyBDaGVja2Vyc1xuICAgIHZhciBnID0gYy50b3BvbG9neSgpXG5cbiAgICByZXR1cm4gbmV3IG1hdGNoKFxuICAgICAgICBuZXcgZ2FtZSAoXG4gICAgICAgICAgICBnLFxuICAgICAgICAgICAgYy5pbml0aWFsaXNlU3RhdGUsXG4gICAgICAgICAgICBjLnZhbGlkYXRlTW92ZSxcbiAgICAgICAgICAgIGMuYXBwbHlNb3ZlLFxuICAgICAgICAgICAgYy53aW5Db25kaXRpb24sXG4gICAgICAgICksXG4gICAgICAgIGcsXG4gICAgICAgIHBsYXllcnMsXG4gICAgKVxufVxuXG4vLyBVdGlsaXR5IGZ1bmN0aW9uc1xuXG4vLyBUaGUgZmlyc3QgY29vcmRpbmF0ZSBpbiBhIG1vdmUgaXMgdGhlIHN0YXJ0aW5nIHBvaW50LCB0aGUgcmVzdCBhcmUgZGVzdGluYXRpb25zXG5mdW5jdGlvbiBkZXN0aW5hdGlvbnNJbihtOiBtb3ZlKSB7XG4gICAgcmV0dXJuIG0uY29vcmRpbmF0ZXMuc2xpY2UoMSwgbS5jb29yZGluYXRlcy5sZW5ndGgpXG59XG5cbi8vIGRldGVybWluZSB0aGUgdmFsaWQgc2V0IG9mIGRpcmVjdGlvbnMgYXZhaWxhYmxlIHRvIHRoZSBwaWVjZVxuZnVuY3Rpb24gZGlyZWN0aW9ucyhwaWVjZTogdGlsZSkge1xuICAgIHZhciBkaXJzOiBBcnJheTxzdHJpbmc+ID0gW11cbiAgICBpZiAocGllY2UudHlwZSA9PSBcInF1ZWVuXCIpIHtcbiAgICAgICAgZGlycyA9IFtcInVwXCIsIFwiZG93blwiXVxuICAgIH0gZWxzZSBpZiAocGllY2Uub3duZXIgPT0gMCkge1xuICAgICAgICBkaXJzID0gW1widXBcIl1cbiAgICB9IGVsc2Uge1xuICAgICAgICBkaXJzID0gW1wiZG93blwiXVxuICAgIH1cbiAgICByZXR1cm4gZGlyc1xufVxuXG5mdW5jdGlvbiBob3BwZWQobmV4dE1vdmU6IG1vdmUsIHRvcG9sb2d5OiBncmFwaCwgZGlyZWN0aW9uczogQXJyYXk8c3RyaW5nPik6Y29vcmRpbmF0ZVtdfHVuZGVmaW5lZCB7XG4gICAgdmFyIG1vdmVWYWxpZCA9IHRydWVcbiAgICB2YXIgaG9wcGVkOiBBcnJheTxjb29yZGluYXRlPiA9IFtdXG4gICAgaG9wcyhuZXh0TW92ZS5jb29yZGluYXRlcywgKHN0YXJ0OiBjb29yZGluYXRlLCBlbmQ6IGNvb3JkaW5hdGUpID0+IHtcbiAgICAgICAgdmFyIGhvcFZhbGlkID0gZmFsc2VcbiAgICAgICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXI6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgaWYgKHRvcG9sb2d5LnRyYXZlcnNlKHN0YXJ0LCBbZGlyLCBkaXIsIFwibGVmdFwiLCBcImxlZnRcIl0pLmVxdWFscyhlbmQpKSB7XG4gICAgICAgICAgICAgICAgaG9wVmFsaWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgLy8gYSBsZWFwZWQgZnJvZ1xuICAgICAgICAgICAgICAgIHZhciBmcm9nID0gdG9wb2xvZ3kudHJhdmVyc2Uoc3RhcnQsIFtkaXIsIFwibGVmdFwiXSlcbiAgICAgICAgICAgICAgICBob3BwZWQucHVzaChmcm9nKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodG9wb2xvZ3kudHJhdmVyc2Uoc3RhcnQsIFtkaXIsIGRpciwgXCJyaWdodFwiLCBcInJpZ2h0XCJdKS5lcXVhbHMoZW5kKSkge1xuICAgICAgICAgICAgICAgIGhvcFZhbGlkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHZhciBmcm9nID0gdG9wb2xvZ3kudHJhdmVyc2Uoc3RhcnQsIFtkaXIsIFwicmlnaHRcIl0pXG4gICAgICAgICAgICAgICAgaWYgKGZyb2cgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYWxhcyEgdGhlIHJlZmluZWQgYW5kIG5vYmxlIGZyZW5jaCFcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJiYXNlZCBwdXNoaW5nIFwiICsgSlNPTi5zdHJpbmdpZnkoZnJvZykpXG4gICAgICAgICAgICAgICAgaG9wcGVkLnB1c2goZnJvZylcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShob3BwZWRbMF0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghaG9wVmFsaWQpIHtcbiAgICAgICAgICAgIG1vdmVWYWxpZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKGhvcHBlZC5sZW5ndGggPj0gMSkge1xuICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShob3BwZWRbMF0pKVxuICAgIH1cbiAgICBpZiAobW92ZVZhbGlkKSB7XG4gICAgICAgIHJldHVybiBob3BwZWRcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhvcHMoY29vcmRpbmF0ZXM6IEFycmF5PGNvb3JkaW5hdGU+LCBjYWxsYmFjazogKHN0YXJ0OiBjb29yZGluYXRlLCBlbmQ6IGNvb3JkaW5hdGUpID0+IHZvaWQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzdGFydCA9IGNvb3JkaW5hdGVzW2ktMV1cbiAgICAgICAgdmFyIGVuZCA9IGNvb3JkaW5hdGVzW2ldXG4gICAgICAgIGNhbGxiYWNrKHN0YXJ0LCBlbmQpXG4gICAgfVxufSIsImltcG9ydCB7IGdyYXBoLCBjb29yZGluYXRlLCBkaXJlY3Rpb24gfSBmcm9tIFwiLi4vZ2FtZS9nYW1lXCJcblxuLy8gQ3JlYXRlcyB0aGUgYWRqYWNlbmN5IGdyYXBoIGZvciBhIHJpZ2h0IGFuZ2xlZCBncmlkIG9mIHdpZHRoIHggYW5kIGhlaWdodCB5XG5leHBvcnQgZnVuY3Rpb24gcmlnaHRHcmlkKHg6IG51bWJlciwgeTogbnVtYmVyKTpncmFwaCB7XG4gICAgdmFyIGVkZ2VzID0gbmV3IE1hcDxjb29yZGluYXRlLCBNYXA8Y29vcmRpbmF0ZSwgZGlyZWN0aW9uPj4oKVxuXG4gICAgdmFyIGFsbFRpbGVzID0gQXJyYXk8Y29vcmRpbmF0ZT4oKVxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB4OyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPHk7IGorKykge1xuICAgICAgICAgICAgYWxsVGlsZXMucHVzaChuZXcgY29vcmRpbmF0ZShpLCBqKSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBkb3duID0gbmV3IGRpcmVjdGlvbihcImRvd25cIilcbiAgICB2YXIgdXAgPSBuZXcgZGlyZWN0aW9uKFwidXBcIilcbiAgICB2YXIgbGVmdCA9IG5ldyBkaXJlY3Rpb24oXCJsZWZ0XCIpXG4gICAgdmFyIHJpZ2h0ID0gbmV3IGRpcmVjdGlvbihcInJpZ2h0XCIpXG5cbiAgICAvLyBuXjIgYWxnb3JpdGhtIHVubGlrZWx5IHRvIGJlIGEgYm90dGxlIG5lY2ssIGFzIHRoaXMgaXMgb25seSBydW4gb25jZSBwZXIgbWF0Y2gsIGFuZCB4IGFuZCB5IGFyZSBsaWtlbHkgdG8gYmUgc21hbGxcbiAgICBhbGxUaWxlcy5mb3JFYWNoKCh0aWxlMTogY29vcmRpbmF0ZSkgPT4ge1xuICAgICAgICBlZGdlcy5zZXQodGlsZTEsIG5ldyBNYXAoKSlcbiAgICAgICAgYWxsVGlsZXMuZm9yRWFjaCgodGlsZTI6IGNvb3JkaW5hdGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aWxlMS54ID09IHRpbGUyLngpIHtcbiAgICAgICAgICAgICAgICBpZiAodGlsZTEueSA9PSB0aWxlMi55ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcy5nZXQodGlsZTEpPy5zZXQodGlsZTIsIGRvd24pXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aWxlMS55ID09IHRpbGUyLnkgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzLmdldCh0aWxlMSk/LnNldCh0aWxlMiwgdXApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGlsZTEueSA9PSB0aWxlMi55KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGUxLnggPT0gdGlsZTIueCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGlsZTEpICsgXCIgdGhlbiBsZWZ0IGdpdmVzIFwiICsgSlNPTi5zdHJpbmdpZnkodGlsZTIpKVxuICAgICAgICAgICAgICAgICAgICBlZGdlcy5nZXQodGlsZTEpPy5zZXQodGlsZTIsIGxlZnQpXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aWxlMS54ID09IHRpbGUyLnggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRpbGUxKSArIFwiIHRoZW4gcmlnaHQgZ2l2ZXMgXCIgKyBKU09OLnN0cmluZ2lmeSh0aWxlMikpXG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzLmdldCh0aWxlMSk/LnNldCh0aWxlMiwgcmlnaHQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gbmV3IGdyYXBoKGVkZ2VzKVxufSJdLCJzb3VyY2VSb290IjoiIn0=